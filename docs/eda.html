<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Methodology</title>

<script src="site_libs/header-attrs-2.6/header-attrs.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="site_libs/datatables-binding-0.17/datatables.js"></script>
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="site_libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="site_libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="site_libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="site_libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="site_libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="site_libs/selectize-0.12.0/selectize.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
&nbsp;

<style>
#TOC {
  background: url("https://theloomaproject.com/wp-content/uploads/2019/01/looma-logo-dark.png");
  background-size: 45%;
  padding-top:50px !important;
  background-repeat: no-repeat;
  background-position: 50% 5px;
}

</style>

<!--
Background-size: contain was filling all the space, 95% gives it a buffer.
You can remove the margin-top as the background-position takes care of it instead: 
the 50% centers the image left/right and 
the 10px assigns its vertical position 15px down from the top.
-->

<link rel="shortcut icon" href="https://theloomaproject.com/wp-content/uploads/2019/01/cropped-Looma-Quotes-192x192.png">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">


&nbsp;

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Loop™ Impact Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="analysis.html">
    <span class="fas fa-lock-open"></span>
     
    Analysis
  </a>
</li>
<li>
  <a href="eda.html">
    <span class="fas fa-lightbulb"></span>
     
    Methodology
  </a>
</li>
<li>
  <a href="automation.html">
    <span class="fas fa-seedling"></span>
     
    Scaling Analysis
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Methodology</h1>
<h4 class="date">Last Updated: 31 January, 2021</h4>

</div>


<div id="goal" class="section level1">
<h1>Goal</h1>
<p>This section is meant to help show my general process around:</p>
<ul>
<li>ingesting the dataset<br />
</li>
<li>exploring the results<br />
</li>
<li>developing the cleaned views</li>
</ul>
<p>I am intentionally not spending a ton of time working to clean up the visuals or extensively documenting the results, but I have enable the “show code” functionality as part of the yaml header for this rmd file (eda.Rmd).</p>
<p>If desired the entirity of the website can be found on github [<a href="https://github.com/phildwalker/looma_audition" class="uri">https://github.com/phildwalker/looma_audition</a>]</p>
</div>
<div id="read-in-data" class="section level1 tabset tabset-pills">
<h1 class="tabset tabset-pills">Read In Data</h1>
<pre class="r"><code>dat &lt;- read_csv(here::here(&quot;data-raw&quot;, &quot;looma_audition_data.csv&quot;))

colnames &lt;- colnames(dat)</code></pre>
<div id="data-notes" class="section level2">
<h2>Data Notes</h2>
<p>The csv file provided contains sample data for analysis. We receive raw data at the transaction level, with one row per customer and item purchased, with timestamps. The sample data is an aggregate of this at the “promotional period” level. Each campaign runs for one promotional period at a time. These periods vary between 3 and 5 weeks in length, so we provide sales in this data as “weekly velocity”, meaning average sales per week during each period.</p>
<p>Specifically, the dataset contains these columns:</p>
<ul>
<li>store_group : which of the three experimental conditions the store falls in<br />
</li>
<li>store_id : ID unique to a physical store<br />
</li>
<li>promo_period_int : unique promo period number ordered in time (this doesn’t provide information you can’t get from period_num and period_year, but it’s convenient)<br />
</li>
<li>period_num : number of the promo period (there are 13 every year)<br />
</li>
<li>period_year: year the period falls in (along with period_num, unique identifies the promo period)<br />
</li>
<li>weekly_velocity_amount : average weekly dollar sales<br />
</li>
<li>weekly_velocity_quantity : average weekly unit sales</li>
</ul>
<p>The data provided is all for one featured product from Brewery A. The experiment was run during period number 11 of 2020. Data is provided back to mid-2018, but don’t feel compelled to incorporate it all in your analysis. What data is most relevant is up to you.</p>
</div>
<div id="summary-of-data" class="section level2">
<h2>Summary of Data</h2>
<pre class="r"><code>glimpse(dat)</code></pre>
<pre><code>## Rows: 1,219
## Columns: 7
## $ store_group              &lt;chr&gt; &quot;baseline_control&quot;, &quot;baseline_control&quot;, &quot;b...
## $ store_id                 &lt;dbl&gt; 1, 2, 3, 3, 4, 5, 1, 4, 6, 3, 7, 4, 4, 8, ...
## $ promo_period_int         &lt;dbl&gt; 46, 46, 50, 62, 63, 64, 65, 66, 68, 68, 69...
## $ period_num               &lt;dbl&gt; 7, 7, 11, 10, 11, 12, 13, 1, 3, 3, 4, 5, 7...
## $ period_year              &lt;dbl&gt; 2018, 2018, 2018, 2019, 2019, 2019, 2019, ...
## $ weekly_velocity_amount   &lt;dbl&gt; 98.68, 120.43, 114.68, 181.65, 112.44, 89....
## $ weekly_velocity_quantity &lt;dbl&gt; 6.75, 7.25, 6.75, 10.25, 6.25, 6.00, 6.75,...</code></pre>
</div>
<div id="check-for-missingness" class="section level2">
<h2>Check for missingness</h2>
<p>Reviewing the chart below we see that we do not have any concerns about variables with missing data, therefore we will not have to take into consideration ways to mitigate/ adjust for missing data.</p>
<pre class="r"><code>naniar::vis_miss(dat)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="first-pass-review" class="section level1 tabset tabset-pills">
<h1 class="tabset tabset-pills">First Pass Review</h1>
<div id="distributions-of-data" class="section level2">
<h2>Distributions of Data</h2>
<p>Using purrr to run through the distribution of each variable by store group (as we know that is the main indicator for this analysis).</p>
<pre class="r"><code>reviewCol &lt;- 
  purrr::map(colnames,
             ~ dat %&gt;% ggplot(aes_string(.x, fill=&quot;store_group&quot;))+
               geom_bar()+
               scale_fill_pdw()+
               labs(title = glue::glue(&quot;Distribution for variable: {.x}&quot;))+
               looma_theme()
               # theme(plot.title = element_text(size = 15))
)

# reviewCol

reviewCol[[1]]</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[2]] + geom_bar(width = 0.0001, alpha = 0.4, color= &quot;black&quot;)+ facet_wrap(store_group ~. , ncol =  1)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-2.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code># the store distribution seems similar for 2019 and 2020
reviewCol[[2]] + geom_bar(width = 0.0001, alpha = 0.4, color= &quot;black&quot;)+ facet_grid(store_group ~factor(period_year))</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-3.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[3]]</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-4.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[4]]</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-5.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[4]] + facet_wrap(factor(period_year) ~ ., ncol = 3)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-6.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[5]]</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-7.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code># no zero sales... which makes sense, but it means the data is naturally censored
reviewCol[[6]] + geom_bar(width = 4)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-8.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[6]] + geom_bar(width = 4)+ facet_wrap(factor(period_year) ~ ., ncol = 3)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-9.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>reviewCol[[7]]</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-10.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="avg-velocity-amount" class="section level2">
<h2>Avg Velocity Amount</h2>
<p>This summary would seem to indicate that the mean of the weekly velocity amount (average weekly dollars in sales) were higher for s</p>
<pre class="r"><code>summary &lt;- dat %&gt;% 
  group_by(store_group) %&gt;% 
  summarise(avg_amnt = mean(weekly_velocity_amount),
            n = n(),
            std_amnt = sd(weekly_velocity_amount))

dat %&gt;% 
  ggplot(aes(store_group, weekly_velocity_amount, fill = store_group, color = store_group))+
    geom_jitter(size = 0.5, width = .3)+
    geom_violin(alpha=0.7)+
    geom_point(data = summary, aes(store_group, avg_amnt), color= &quot;black&quot;, size = 2.5)+
    labs(title = &quot;Comparison of Weekly Velocity Amount by Store Group&quot;)+
    scale_fill_pdw()+
    scale_color_pdw()+
    looma_theme()</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>summary %&gt;% 
  gt() %&gt;% 
  fmt_number(columns = c(2,4), decimals = 2)</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ssvfxmkrei .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ssvfxmkrei .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ssvfxmkrei .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ssvfxmkrei .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ssvfxmkrei .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ssvfxmkrei .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ssvfxmkrei .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ssvfxmkrei .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ssvfxmkrei .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ssvfxmkrei .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ssvfxmkrei .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ssvfxmkrei .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ssvfxmkrei .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ssvfxmkrei .gt_from_md > :first-child {
  margin-top: 0;
}

#ssvfxmkrei .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ssvfxmkrei .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ssvfxmkrei .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ssvfxmkrei .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ssvfxmkrei .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ssvfxmkrei .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ssvfxmkrei .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ssvfxmkrei .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ssvfxmkrei .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ssvfxmkrei .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ssvfxmkrei .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ssvfxmkrei .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ssvfxmkrei .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ssvfxmkrei .gt_left {
  text-align: left;
}

#ssvfxmkrei .gt_center {
  text-align: center;
}

#ssvfxmkrei .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ssvfxmkrei .gt_font_normal {
  font-weight: normal;
}

#ssvfxmkrei .gt_font_bold {
  font-weight: bold;
}

#ssvfxmkrei .gt_font_italic {
  font-style: italic;
}

#ssvfxmkrei .gt_super {
  font-size: 65%;
}

#ssvfxmkrei .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ssvfxmkrei" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">store_group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_amnt</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">std_amnt</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">baseline_control</td>
      <td class="gt_row gt_right">49.59</td>
      <td class="gt_row gt_center">989</td>
      <td class="gt_row gt_right">39.04</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">film_control</td>
      <td class="gt_row gt_right">45.96</td>
      <td class="gt_row gt_center">123</td>
      <td class="gt_row gt_right">21.98</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">program_test</td>
      <td class="gt_row gt_right">64.55</td>
      <td class="gt_row gt_center">107</td>
      <td class="gt_row gt_right">35.75</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Using an anova to see if the differences are statistically significant. We would conclude that one or more of the group’s weekly velocity amounts are statisically different</p>
<pre class="r"><code>observed_f_statistic &lt;-dat %&gt;%
  specify(weekly_velocity_amount ~ store_group) %&gt;%
  calculate(stat = &quot;F&quot;)


# visualize the theoretical null distribution and test statistic
dat %&gt;%
  specify(weekly_velocity_amount ~ store_group) %&gt;%
  hypothesize(null = &quot;independence&quot;) %&gt;%
  visualize(method = &quot;theoretical&quot;) + 
  shade_p_value(observed_f_statistic,
                direction = &quot;greater&quot;)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-6-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code># generate the null distribution using randomization
null_distribution &lt;- dat %&gt;%
  specify(weekly_velocity_amount ~ store_group) %&gt;%
  hypothesize(null = &quot;independence&quot;) %&gt;%
  generate(reps = 1000, type = &quot;permute&quot;) %&gt;%
  calculate(stat = &quot;F&quot;)

# calculate the p value from the observed statistic and null distribution
p_value &lt;- null_distribution %&gt;%
  get_p_value(obs_stat = observed_f_statistic,
              direction = &quot;greater&quot;)

p_value</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["p_value"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="avg-velocity-quantity" class="section level2">
<h2>Avg Velocity Quantity</h2>
<p>This summary would seem to indicate that the mean of the weekly velocity amount (average weekly dollars in sales) were higher for s</p>
<pre class="r"><code>summary &lt;- dat %&gt;% 
  group_by(store_group) %&gt;% 
  summarise(avg_amnt = mean(weekly_velocity_quantity),
            n = n(),
            std_amnt = sd(weekly_velocity_quantity))

dat %&gt;% 
  ggplot(aes(store_group, weekly_velocity_quantity, fill = store_group, color = store_group))+
    geom_jitter(size = 0.5, width = .3)+
    geom_violin(alpha=0.7)+
    geom_point(data = summary, aes(store_group, avg_amnt), color= &quot;black&quot;, size = 2.5)+
    labs(title = &quot;Comparison of Weekly Velocity Quantity by Store Group&quot;)+
    scale_fill_pdw()+
    scale_color_pdw()+
    looma_theme()</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-7-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code>summary %&gt;% 
  gt() %&gt;% 
  fmt_number(columns = c(2,4), decimals = 2)</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#rubpoznmfh .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rubpoznmfh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rubpoznmfh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rubpoznmfh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rubpoznmfh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rubpoznmfh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rubpoznmfh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rubpoznmfh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rubpoznmfh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rubpoznmfh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rubpoznmfh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rubpoznmfh .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#rubpoznmfh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rubpoznmfh .gt_from_md > :first-child {
  margin-top: 0;
}

#rubpoznmfh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rubpoznmfh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rubpoznmfh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#rubpoznmfh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rubpoznmfh .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#rubpoznmfh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rubpoznmfh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rubpoznmfh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rubpoznmfh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rubpoznmfh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rubpoznmfh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#rubpoznmfh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rubpoznmfh .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#rubpoznmfh .gt_left {
  text-align: left;
}

#rubpoznmfh .gt_center {
  text-align: center;
}

#rubpoznmfh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rubpoznmfh .gt_font_normal {
  font-weight: normal;
}

#rubpoznmfh .gt_font_bold {
  font-weight: bold;
}

#rubpoznmfh .gt_font_italic {
  font-style: italic;
}

#rubpoznmfh .gt_super {
  font-size: 65%;
}

#rubpoznmfh .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="rubpoznmfh" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">store_group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_amnt</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">n</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">std_amnt</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">baseline_control</td>
      <td class="gt_row gt_right">2.78</td>
      <td class="gt_row gt_center">989</td>
      <td class="gt_row gt_right">2.21</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">film_control</td>
      <td class="gt_row gt_right">2.83</td>
      <td class="gt_row gt_center">123</td>
      <td class="gt_row gt_right">1.41</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">program_test</td>
      <td class="gt_row gt_right">3.97</td>
      <td class="gt_row gt_center">107</td>
      <td class="gt_row gt_right">2.28</td>
    </tr>
  </tbody>
  
  
</table></div>
<p>Using an anova to see if the differences are statistically significant.</p>
<pre class="r"><code>observed_f_statistic &lt;-dat %&gt;%
  specify(weekly_velocity_quantity ~ store_group) %&gt;%
  calculate(stat = &quot;F&quot;)


# visualize the theoretical null distribution and test statistic
dat %&gt;%
  specify(weekly_velocity_quantity ~ store_group) %&gt;%
  hypothesize(null = &quot;independence&quot;) %&gt;%
  visualize(method = &quot;theoretical&quot;) + 
  shade_p_value(observed_f_statistic,
                direction = &quot;greater&quot;)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-8-1.png" width="672" style="display: block; margin: auto;" /></p>
<pre class="r"><code># generate the null distribution using randomization
null_distribution &lt;- dat %&gt;%
  specify(weekly_velocity_quantity ~ store_group) %&gt;%
  hypothesize(null = &quot;independence&quot;) %&gt;%
  generate(reps = 1000, type = &quot;permute&quot;) %&gt;%
  calculate(stat = &quot;F&quot;)

# calculate the p value from the observed statistic and null distribution
p_value &lt;- null_distribution %&gt;%
  get_p_value(obs_stat = observed_f_statistic,
              direction = &quot;greater&quot;)

p_value</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["p_value"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"0"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="investigatings-effect" class="section level1 tabset tabset-pills">
<h1 class="tabset tabset-pills">Investigatings Effect</h1>
<div id="by-group-and-by-year" class="section level2">
<h2>By Group and by Year</h2>
<p>Visually it looks like across conditions, that the sales are increasing YOY.</p>
<pre class="r"><code>summary &lt;- dat %&gt;% 
  mutate(period_year = as.factor(period_year)) %&gt;% 
  group_by(store_group, period_year) %&gt;% 
  summarise(avg_amnt = mean(weekly_velocity_quantity),
            n = n(),
            std_amnt = sd(weekly_velocity_quantity))

dat %&gt;% 
  mutate(period_year = as.factor(period_year)) %&gt;% 
  ggplot(aes(period_year, weekly_velocity_quantity, fill = period_year, color = period_year))+
    geom_jitter(size = 0.5, width = .3)+
    geom_violin(alpha=0.7)+
    geom_point(data = summary, aes(period_year, avg_amnt), color= &quot;black&quot;, size = 2.5)+
    labs(title = &quot;Comparison of Weekly Velocity Quantity by Store Group&quot;)+
    scale_fill_pdw()+
    scale_color_pdw()+
    looma_theme()+
    facet_wrap(store_group ~ ., ncol =3)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>It’s interesting that the film control group doesn’t seem to see the same YOY increase for 2019 -&gt; 2020 as the other two conditions.</p>
<pre class="r"><code>dat %&gt;% 
  mutate(period_year = as.factor(period_year)) %&gt;% 
  group_by(store_group, period_year) %&gt;% 
  summarise(avg_amnt = mean(weekly_velocity_quantity),
            avg_dol = mean(weekly_velocity_amount)) %&gt;%
  ungroup() %&gt;% 
  pivot_wider(names_from = &quot;period_year&quot;, values_from = c(&quot;avg_amnt&quot;, &quot;avg_dol&quot;)) %&gt;% 
  gt() %&gt;% 
  fmt_number(columns = 2:7, decimals = 2)</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ronttwyiax .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ronttwyiax .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ronttwyiax .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ronttwyiax .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ronttwyiax .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ronttwyiax .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ronttwyiax .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ronttwyiax .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ronttwyiax .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ronttwyiax .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ronttwyiax .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ronttwyiax .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ronttwyiax .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ronttwyiax .gt_from_md > :first-child {
  margin-top: 0;
}

#ronttwyiax .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ronttwyiax .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ronttwyiax .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ronttwyiax .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ronttwyiax .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ronttwyiax .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ronttwyiax .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ronttwyiax .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ronttwyiax .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ronttwyiax .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ronttwyiax .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ronttwyiax .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ronttwyiax .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ronttwyiax .gt_left {
  text-align: left;
}

#ronttwyiax .gt_center {
  text-align: center;
}

#ronttwyiax .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ronttwyiax .gt_font_normal {
  font-weight: normal;
}

#ronttwyiax .gt_font_bold {
  font-weight: bold;
}

#ronttwyiax .gt_font_italic {
  font-style: italic;
}

#ronttwyiax .gt_super {
  font-size: 65%;
}

#ronttwyiax .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="ronttwyiax" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">store_group</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_amnt_2018</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_amnt_2019</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_amnt_2020</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_dol_2018</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_dol_2019</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">avg_dol_2020</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">baseline_control</td>
      <td class="gt_row gt_right">1.87</td>
      <td class="gt_row gt_right">2.46</td>
      <td class="gt_row gt_right">3.73</td>
      <td class="gt_row gt_right">33.00</td>
      <td class="gt_row gt_right">43.54</td>
      <td class="gt_row gt_right">67.08</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">film_control</td>
      <td class="gt_row gt_right">1.95</td>
      <td class="gt_row gt_right">3.00</td>
      <td class="gt_row gt_right">3.18</td>
      <td class="gt_row gt_right">31.94</td>
      <td class="gt_row gt_right">48.13</td>
      <td class="gt_row gt_right">51.98</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">program_test</td>
      <td class="gt_row gt_right">2.68</td>
      <td class="gt_row gt_right">3.50</td>
      <td class="gt_row gt_right">5.00</td>
      <td class="gt_row gt_right">43.58</td>
      <td class="gt_row gt_right">56.16</td>
      <td class="gt_row gt_right">81.98</td>
    </tr>
  </tbody>
  
  
</table></div>
</div>
<div id="linear-model-for-yr-group" class="section level2">
<h2>Linear model for yr + group</h2>
<pre class="r"><code>lm_dat &lt;- dat %&gt;% 
  mutate(period_year = as.character(period_year))

lm.model &lt;- lm(data = lm_dat, 
               formula = weekly_velocity_quantity ~ 0 + period_year*store_group)

summary(lm.model)</code></pre>
<pre><code>## 
## Call:
## lm(formula = weekly_velocity_quantity ~ 0 + period_year * store_group, 
##     data = lm_dat)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.5000 -1.3716 -0.4794  1.0000 11.2706 
## 
## Coefficients:
##                                         Estimate Std. Error t value
## period_year2018                          1.87156    0.13711  13.650
## period_year2019                          2.46301    0.09890  24.905
## period_year2020                          3.72940    0.10790  34.564
## store_groupfilm_control                  0.08214    0.41301   0.199
## store_groupprogram_test                  0.81265    0.48423   1.678
## period_year2019:store_groupfilm_control  0.45485    0.50908   0.893
## period_year2020:store_groupfilm_control -0.63541    0.52474  -1.211
## period_year2019:store_groupprogram_test  0.22434    0.58086   0.386
## period_year2020:store_groupprogram_test  0.45795    0.58246   0.786
##                                                    Pr(&gt;|t|)    
## period_year2018                         &lt;0.0000000000000002 ***
## period_year2019                         &lt;0.0000000000000002 ***
## period_year2020                         &lt;0.0000000000000002 ***
## store_groupfilm_control                              0.8424    
## store_groupprogram_test                              0.0936 .  
## period_year2019:store_groupfilm_control              0.3718    
## period_year2020:store_groupfilm_control              0.2262    
## period_year2019:store_groupprogram_test              0.6994    
## period_year2020:store_groupprogram_test              0.4319    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.024 on 1210 degrees of freedom
## Multiple R-squared:  0.6891, Adjusted R-squared:  0.6868 
## F-statistic:   298 on 9 and 1210 DF,  p-value: &lt; 0.00000000000000022</code></pre>
<pre class="r"><code>summary(aov(lm.model))</code></pre>
<pre><code>##                           Df Sum Sq Mean Sq F value               Pr(&gt;F)    
## period_year                3  10846    3615  882.26 &lt; 0.0000000000000002 ***
## store_group                2    116      58   14.16          0.000000831 ***
## period_year:store_group    4     30       7    1.80                0.126    
## Residuals               1210   4959       4                                 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="trends-over-time" class="section level2">
<h2>Trends over time</h2>
<pre class="r"><code>dat &lt;-
  dat %&gt;% 
  mutate(period_yr_num = as.numeric(paste0(as.character(period_year), &quot;.&quot;, as.character(period_num))))</code></pre>
<div id="are-stores-represented-evenly-across-the-time-period" class="section level3">
<h3>Are stores represented evenly across the time period?</h3>
<pre class="r"><code>dat %&gt;% 
  count(store_id, store_group, period_year) %&gt;% 
  pivot_wider(names_from= period_year, values_from = n) %&gt;% 
  DT::datatable(rownames = F, filter = c(&quot;top&quot;))</code></pre>
<div id="htmlwidget-4a57afb353326399121b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4a57afb353326399121b">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"42\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"3\" data-max=\"9\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"5\" data-max=\"13\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"1\" data-max=\"11\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],["baseline_control","baseline_control","baseline_control","baseline_control","program_test","baseline_control","baseline_control","baseline_control","film_control","baseline_control","program_test","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","baseline_control","film_control","program_test","baseline_control","program_test","baseline_control","film_control","baseline_control","baseline_control","film_control","baseline_control"],[8,8,7,7,6,7,8,7,7,8,7,7,5,3,7,3,6,8,6,7,6,7,8,9,7,6,6,8,4,8,7,8,7,null,7,6,8,7,null,7,6,null],[13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,8,13,13,13,13,10,13,13,13,13,11,13,13,13,13,13,5,13,13,13,13,13,13,13,null],[11,11,11,11,11,11,11,11,11,11,11,11,11,11,10,11,10,9,11,11,11,11,1,11,11,11,11,10,11,11,11,11,11,11,11,11,11,11,11,11,11,4]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>store_id<\/th>\n      <th>store_group<\/th>\n      <th>2018<\/th>\n      <th>2019<\/th>\n      <th>2020<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[0,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="average-sales-dollars-by-period" class="section level2">
<h2>Average Sales Dollars by Period</h2>
<p>2018… maybe just had some interest from the “innovation”<br />
2019 is interesting, and would follow my bias the most with the film_control and program_test following similar trends at different magnitudes. 2020 is odd, where it seems to be having an entirely different pattern than expected, with average sale dollars spiking up for the second half of the year in the “program_test” condition.</p>
<pre class="r"><code>dat %&gt;% 
  mutate(date_us_week = as.Date(paste(period_year, period_num * 4, 1), format = &quot;%Y %U %u&quot;)) %&gt;% 
  # mutate(period_year = as.factor(period_year)) %&gt;% 
  group_by(date_us_week,period_year, store_group ) %&gt;% 
  summarize(avg_amnt = mean(weekly_velocity_quantity),
            avg_dol = mean(weekly_velocity_amount),
            sd_dol = sd(weekly_velocity_amount)) %&gt;% 
  ggplot(aes(date_us_week, avg_dol, color = store_group))+
    geom_line(size = 1.2)+
    geom_point(size = 1.5)+
    geom_errorbar(aes(ymin = avg_dol - sd_dol, ymax = avg_dol + sd_dol), width = 9, position = &quot;dodge&quot;)+
    labs(title = &quot;Avg Weekly Dollars For Store Group Over Time&quot;)+
    scale_fill_pdw()+
    scale_color_pdw()+
    scale_x_date(date_breaks = &quot;1 months&quot;)+
    looma_theme()+
    facet_wrap(period_year ~ ., ncol =3, scales = &quot;free_x&quot;)+
    theme(axis.text.x = element_text(angle = 60))+
    NULL</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-14-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="is-there-a-potential-store-dependency" class="section level2">
<h2>Is there a potential store dependency?</h2>
<p>Not sure if we can know if this is the case or not because we only see stores in one condition or the other.</p>
</div>
</div>

&nbsp;
&nbsp;
<hr style="border: 1px solid gray;" />

<font color = "#808080">
  <p style = "text-align: center;">
    Phil Walker <br>
    Data Scientist <br>
    Greensboro, NC<br>
    <img src="CardsViz.png" alt="logo" class="center" style="width:20%">
  </p>
  
</font>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
